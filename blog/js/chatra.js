!function(e,t){function a(){}function r(e){var t=0;for(var a in e)e.hasOwnProperty(a)&&t++;return t}function n(e,t){if(r(e)!=r(t))return!1;for(var a in e)if(e.hasOwnProperty(a)&&t[a]!=e[a])return!1;return!0}function i(e,t){new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)}function o(e,t){e.className=e.className.replace(new RegExp("(\\s+|^)"+t+"(\\s+|$)","g")," ").replace(/^\s+|\s+$/g,"")}function s(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){var a=["Webkit","Moz","ms"],r=t.createElement("div");if(void 0!==r.style[e])return!0;for(var n in e=e.charAt(0).toUpperCase()+e.slice(1),a)if(void 0!==r.style[a[n]+e])return!0;return!1}function l(e,a){var r=new Date;r.setTime(r.getTime()+31536e7),t.cookie=e+"="+a+";expires="+r.toGMTString()+";"}function h(e){var a=t.cookie.split(";");e+="=";for(var r=0;r<a.length;r++){for(var n=a[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}}function d(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function p(e){return e%2==1}function f(t){var a=!0;for(var r in t)t.hasOwnProperty(r)&&!{string:1,boolean:1,number:1}[typeof t[r]]&&null!==t[r]&&(e.console&&e.console.warn&&e.console.warn("Chatra integration error: We accept Strings, Numbers, Booleans and null as integration property values. `"+r+"`’s type is `"+typeof t[r]+"`."),a=!1);return a}function m(e){for(var t in e)null!==e[t]&&(e[t]=e[t].toString());return e}function _(e){if(!e)return{};var t=document.createElement("a");return t.href=e,t}function u(){var e;try{e=t.querySelector('meta[name="viewport" i]')}catch(a){e=t.querySelector('meta[name="viewport"]')}return e}var g;g=function(e){e=e||21;var t=window.crypto||window.msCrypto;if(!t)throw new Error("This browser doesn’t support `crypto` :—(");for(var a="",r=t.getRandomValues(new Uint8Array(e));0<e--;)a+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&r[e]];return a};var b=function(e){function t(t){for(var r=0;r<t.length;r++){for(var n=!0,i=0;i<t[r].test.length;i++)if(t[r].test[i]instanceof RegExp){if(!t[r].test[i].test(e)){n=!1;break}}else if(-1==e.indexOf(t[r].test[i])){n=!1;break}if(n){a(t[r]);break}}}function a(e){for(var t in i)if(i.hasOwnProperty(t)&&e[t]){if(e[t].$version){var a=r(e[t].$version.search);if(a){var o=a.split(".");e[t].version=a,o[0]&&(e[t].majorVersion=parseInt(o[0])),o[1]&&(e[t].minorVersion=parseInt(o[1])),o[2]&&(e[t].patchVersion=parseInt(o[2]))}}for(var s in e[t])e[t].hasOwnProperty(s)&&"$"!==s[0]&&(n[t][s]=e[t][s])}}function r(t){var a;if(t instanceof RegExp){if(!(a=(e.match(t)||[])[0]))return}else a=t;var r,n=e.indexOf(a);if(-1!=n&&(r=e.substring(n+a.length),regexpResult=/^(\d+(\.|_)){0,2}\d+/.exec(r),regexpResult))return regexpResult[0].replace(/_/g,".")}var n={browser:{name:"",version:"",majorVersion:null,minorVersion:null,patchVersion:null,engine:""},os:{name:"",version:"",majorVersion:null,minorVersion:null,patchVersion:null},features:{bw:!1,mobile:!1,tv:!1,proxy:!1}},i={browser:[{test:["SailfishBrowser"],browser:{name:"sailfishbrowser",engine:"gecko",$version:{search:"SailfishBrowser/"}},features:{mobile:!0}},{test:["Edge/"],browser:{name:"edge",engine:"edgehtml",$version:{search:"Edge/"}}},{test:["MSIE"],browser:{name:"ie",engine:"trident",$version:{search:"MSIE "}}},{test:["Trident"],browser:{name:"ie",engine:"trident",$version:{search:"rv:"}}},{test:["OPR/"],browser:{name:"opera",engine:"webkit",$version:{search:"OPR/"}}},{test:["Chrome"],browser:{name:"chrome",engine:"webkit",$version:{search:"Chrome/"}}},{test:["Firefox"],browser:{name:"firefox",engine:"gecko",$version:{search:"Firefox/"}}},{test:["NokiaBrowser"],browser:{name:"nokiabrowser",engine:"webkit",$version:{search:"NokiaBrowser/"}},features:{mobile:!0}},{test:["Opera Mini","Presto"],browser:{name:"operamini",engine:"presto",$version:{search:"Version/"}},features:{mobile:!0,proxy:!0}},{test:["Opera Mini","WebKit"],browser:{name:"operamini",engine:"webkit"},features:{mobile:!0,proxy:!0}},{test:["Opera"],browser:{name:"opera",engine:"presto",$version:{search:"Version/"}}},{test:["OviBrowser"],browser:{name:"ovi",engine:"gecko",$version:{search:"OviBrowser/"}},features:{mobile:!0,proxy:!0}},{test:["CriOS/"],browser:{name:"chrome",engine:"webkit",$version:{search:"CriOS/"}}},{test:["Coast/"],browser:{name:"coast",engine:"webkit",$version:{search:"Coast/"}}},{test:["Safari","Version/",/(iPhone|iPod|iPad|Macintosh|Windows)/],browser:{name:"safari",engine:"webkit",$version:{search:"Version/"}}},{test:["WebKit"],browser:{engine:"webkit"}},{test:["Gecko/"],browser:{engine:"gecko"}}],os:[{test:["Sailfish"],os:{name:"sailfish"},features:{mobile:!0}},{test:["Windows Phone"],os:{name:"winphone",$version:{search:"Windows Phone "}},features:{mobile:!0}},{test:["Windows"],os:{name:"win",$version:{search:"Windows NT "}}},{test:["Macintosh","OS X 10"],os:{name:"osx",$version:{search:/OS X /}}},{test:["Ubuntu"],os:{name:"ubuntu"}},{test:["Fedora"],os:{name:"fedora",$version:{search:"Fedora/"}}},{test:["Kindle"],os:{name:"kindle",$version:{search:"Kindle/"}},features:{bw:!0,mobile:!0}},{test:[/(BlackBerry|BB\d+)/],os:{name:"blackberry",$version:{search:"Version/"}},features:{mobile:!0}},{test:["Symbian"],os:{name:"symbian"},features:{mobile:!0}},{test:["Series40"],os:{name:"symbian"},features:{mobile:!0}},{test:["PlayStation Vita"],os:{name:"psvita"},features:{mobile:!0}},{test:["Nintendo DSi"],os:{name:"dsi"},features:{mobile:!0}},{test:["New Nintendo 3DS"],os:{name:"n3ds"},browser:{engine:"webkit"},features:{mobile:!0}},{test:["Nintendo 3DS"],os:{name:"3ds"},browser:{engine:"webkit"},features:{mobile:!0}},{test:["Viera"],os:{name:"viera"},browser:{engine:"webkit"},features:{tv:!0}},{test:["SonyDTV"],features:{tv:!0}},{test:["Android"],os:{name:"android",$version:{search:"Android "}},features:{mobile:!0}},{test:[/iPhone|iPod|iPad/],os:{name:"ios",$version:{search:"OS "}},features:{mobile:!0}}],features:[{test:[/mobile/i],features:{mobile:!0}},{test:[/smart-{0,1}tv/i],features:{tv:!0}}]};return e?(function(){for(var e in i)t(i[e])}(),n):n},w="@-webkit-keyframes chatra-chat-appear-from-bottom{from{opacity:0;-webkit-transform:translateY(20px) scale(.97);transform:translateY(20px) scale(.97)}to{opacity:1;-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}@keyframes chatra-chat-appear-from-bottom{from{opacity:0;-webkit-transform:translateY(20px) scale(.97);transform:translateY(20px) scale(.97)}to{opacity:1;-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}@-webkit-keyframes chatra-chat-appear-from-top{from{opacity:0;-webkit-transform:translateY(-20px) scale(.97);transform:translateY(-20px) scale(.97)}to{opacity:1;-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}@keyframes chatra-chat-appear-from-top{from{opacity:0;-webkit-transform:translateY(-20px) scale(.97);transform:translateY(-20px) scale(.97)}to{opacity:1;-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1)}}@-webkit-keyframes chatra-chat-appear{from{opacity:0;-webkit-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes chatra-chat-appear{from{opacity:0;-webkit-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes chatra-round-button-appear{from{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes chatra-round-button-appear{from{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes chatra-tab-button-appear{from{opacity:0;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes chatra-tab-button-appear{from{opacity:0;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes chatra-transparent-appear{from{opacity:0}to{opacity:1}}@keyframes chatra-transparent-appear{from{opacity:0}to{opacity:1}}html.chatra-mobile-widget-expanded,body.chatra-mobile-widget-expanded{overflow:hidden !important;height:100% !important;width:100% !important;position:fixed !important;margin:0 !important;top:0 !important;left:0 !important}#chatra{visibility:hidden;opacity:0;position:fixed;max-height:calc(100% - 40px);max-width:calc(100% - 40px);-webkit-transition:.2s linear;transition:.2s linear;-webkit-transition-property:visibility,opacity;transition-property:visibility,opacity;-webkit-backface-visibility:hidden;backface-visibility:hidden;width:auto;height:auto;min-height:0;min-width:0;display:block;-webkit-box-sizing:content-box;box-sizing:content-box;padding:0;margin:0;}@media print{#chatra{display:none}}#chatra__iframe-wrapper,#chatra__iframe{left:0 !important;top:0 !important;margin:0 !important;padding:0 !important;display:block !important;background:transparent !important}#chatra__iframe-wrapper,#chatra:not(.chatra--toggling) #chatra__iframe,#chatra__iframe.chatra__iframe--mode-frame{height:100% !important;width:100% !important;min-width:100% !important;max-width:100% !important;min-height:100% !important;max-height:100% !important}#chatra__iframe-wrapper{position:absolute;-webkit-box-shadow:0 0 3px rgba(0,0,0,0.1),0 0 10px rgba(0,0,0,0.3);box-shadow:0 0 3px rgba(0,0,0,0.1),0 0 10px rgba(0,0,0,0.3);overflow:hidden !important}#chatra #chatra__iframe-wrapper,#chatra.chatra--safari #chatra__iframe,#chatra.chatra--webkit.chatra--expanded #chatra__iframe{border-radius:10px}#chatra.chatra--mobile-widget:not(.chatra--expanded),#chatra.chatra--mobile-widget:not(.chatra--expanded) *{cursor:pointer}#chatra.chatra--safari #chatra__iframe,#chatra.chatra--webkit.chatra--expanded #chatra__iframe{-webkit-mask-image:-webkit-gradient(linear,left top, left bottom,from(#000),to(#000));-webkit-mask-image:linear-gradient(#000,#000);mask-image:-webkit-gradient(linear,left top, left bottom,from(#000),to(#000));mask-image:linear-gradient(#000,#000);-webkit-mask-position:50% 50%;mask-position:50% 50%;-webkit-mask-size:100% 100%;mask-size:100% 100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}#chatra:not(.chatra--expanded) #chatra__iframe-wrapper{-webkit-transition:.2s linear;transition:.2s linear;-webkit-transition-property:-webkit-box-shadow;transition-property:-webkit-box-shadow;transition-property:box-shadow;transition-property:box-shadow, -webkit-box-shadow}#chatra:not(.chatra--expanded):hover #chatra__iframe-wrapper{-webkit-box-shadow:0 0 3px rgba(0,0,0,0.1),0 0 15px rgba(0,0,0,0.4);box-shadow:0 0 3px rgba(0,0,0,0.1),0 0 15px rgba(0,0,0,0.4)}#chatra.chatra--visible{visibility:visible;opacity:1}#chatra.chatra--animating{-webkit-transition:350ms cubic-bezier(.25,.1,0,1);transition:350ms cubic-bezier(.25,.1,0,1);-webkit-transition-property:height,width,max-width,max-height,top,bottom,left,right,-webkit-transform;transition-property:height,width,max-width,max-height,top,bottom,left,right,-webkit-transform;transition-property:height,width,max-width,max-height,top,bottom,left,right,transform;transition-property:height,width,max-width,max-height,top,bottom,left,right,transform,-webkit-transform}#chatra.chatra--style-round:not(.chatra--expanded) #chatra__iframe-wrapper,#chatra.chatra--style-round.chatra--safari:not(.chatra--expanded) #chatra__iframe{border-radius:50%}#chatra.chatra--fast-toggle.chatra--style-round:not(.chatra--expanded) #chatra__iframe-wrapper{-webkit-animation:chatra-round-button-appear 150ms ease-out 50ms both;animation:chatra-round-button-appear 150ms ease-out 50ms both}#chatra.chatra--fast-toggle.chatra--style-tab:not(.chatra--expanded) #chatra__iframe-wrapper{-webkit-animation:chatra-tab-button-appear 150ms ease-out 50ms both;animation:chatra-tab-button-appear 150ms ease-out 50ms both}#chatra.chatra--fast-toggle.chatra--expanded #chatra__iframe-wrapper{-webkit-animation:chatra-chat-appear 150ms ease-out 50ms both;animation:chatra-chat-appear 150ms ease-out 50ms both}#chatra.chatra--fast-toggle.chatra--transparent #chatra__iframe-wrapper{-webkit-animation-name:chatra-transparent-appear;animation-name:chatra-transparent-appear}#chatra.chatra--fast-toggle.chatra--expanded:not(.chatra--mobile-widget):not(.chatra--transparent) #chatra__iframe-wrapper{-webkit-animation-name:chatra-chat-appear-from-bottom;animation-name:chatra-chat-appear-from-bottom}#chatra.chatra--fast-toggle.chatra--pos-top.chatra--expanded:not(.chatra--mobile-widget):not(.chatra--transparent) #chatra__iframe-wrapper{-webkit-animation-name:chatra-chat-appear-from-top;animation-name:chatra-chat-appear-from-top}#chatra.chatra--expanded #chatra__iframe-wrapper{-webkit-box-shadow:0 0 3px rgba(0,0,0,0.1),0 5px 50px rgba(0,0,0,0.2);box-shadow:0 0 3px rgba(0,0,0,0.1),0 5px 50px rgba(0,0,0,0.2)}#chatra.chatra--side-bottom{bottom:55px}#chatra.chatra--side-left{left:20px}#chatra.chatra--side-left.chatra--style-tab:not(.chatra--expanded){left:10px}#chatra.chatra--side-right{right:20px}#chatra.chatra--side-right.chatra--style-tab:not(.chatra--expanded){right:10px}#chatra.chatra--side-left.chatra--expanded{bottom:20px;left:20px}#chatra.chatra--side-right.chatra--expanded{bottom:20px;right:20px}#chatra.chatra--pos-right{right:20px}#chatra.chatra--pos-left{left:20px}#chatra.chatra--pos-center{left:50%}#chatra.chatra--pos-top.chatra--style-tab:not(.chatra--expanded){bottom:100%;margin-bottom:-20px}#chatra.chatra--pos-top.chatra--style-round:not(.chatra--expanded){top:20px}#chatra.chatra--pos-bottom:not(.chatra--expanded){bottom:20px}#chatra.chatra--pos-middle:not(.chatra--expanded){bottom:50%}#chatra.chatra--mobile-widget.chatra--expanded:not(.chatra--transparent){max-width:none;max-height:none;top:0 !important;bottom:0 !important}#chatra.chatra--mobile-widget.chatra--expanded #chatra__iframe-wrapper,#chatra.chatra--safari.chatra--mobile-widget.chatra--expanded #chatra__iframe{border-radius:.1px}#chatra.chatra--mobile-widget.chatra--expanded.chatra--pos-right:not(.chatra--transparent){right:0}#chatra.chatra--mobile-widget.chatra--expanded.chatra--pos-left:not(.chatra--transparent){left:0}#chatra.chatra--mobile-widget.chatra--expanded.chatra--pos-center:not(.chatra--transparent){left:0}#chatra.chatra--mobile-widget.chatra--expanded.chatra--side-right:not(.chatra--transparent){right:0}#chatra.chatra--mobile-widget.chatra--expanded.chatra--side-left:not(.chatra--transparent){left:0}#chatra.chatra--transparent.chatra--expanded{bottom:10px;}#chatra.chatra--transparent.chatra--expanded #chatra__iframe-wrapper{-webkit-box-shadow:none;box-shadow:none}#chatra.chatra--side-left.chatra--transparent,#chatra.chatra--pos-left.chatra--transparent{left:10px}#chatra.chatra--side-right.chatra--transparent,#chatra.chatra--pos-right.chatra--transparent{right:10px}#chatra.chatra--mobile-widget.chatra--transparent{max-height:251px}",y=350,v=60,x=[];e.Chatra&&e.Chatra.q&&(x=e.Chatra.q),function r(){function k(e){return function(){I[e].apply(I,arguments)}}var C=function(){arguments.length&&("function"==typeof C[arguments[0]]&&"_"!=arguments[0][0]?C[arguments[0]].apply(C,Array.prototype.slice.call(arguments,1)):console.warn("Chatra: No such method: "+arguments[0]))},I=C;(function(e,t){for(var a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(e[a]=t[a])})(C,{_init:function(){if(e.ChatraID){if(b){var a=I._sniff=b(e.navigator.userAgent),r=I._setup=e.ChatraSetup||{},n=I._displayMode=r.mode||"widget";if(I._isMobile=a.features.mobile,"trident"==a.browser.engine&&a.browser.majorVersion&&a.browser.majorVersion<=10)return void I.kill();if(I._isSafari="safari"===a.browser.name||"ios"===a.os.name,"widget"==n&&!0===r.mobileOnly&&!I._isMobile)return void I.kill();if("widget"==n&&!0===r.disabledOnMobile&&I._isMobile)return void I.kill();I._features={transform:c("transform"),transition:c("transition")};var i=I._iframe=t.createElement("iframe"),o=I._wrapper=t.createElement("div"),s=I._iframeWrapper=t.createElement("div"),l=I._style=t.createElement("style"),h=t.getElementsByTagName("head")[0],d=e.ChatraProtocol||"https:",p=e.ChatraHost||"chat.chatra.io",f=e.ChatraID,m=I._clientId=I._getClientId(),u=function(a){var n=function(){i||(!I._killed&&a(),i=!0)},i=!1;r.deferredLoading?"complete"===t.readyState?n():e.addEventListener("load",n,!1):(t.attachEvent?"complete"===t.readyState:"loading"!==t.readyState)?n():(t.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1))};I._isSafari&&I._addClass("safari"),"webkit"===a.browser.engine&&I._addClass("webkit"),h.appendChild(l),l.textContent=w,i.setAttribute("frameborder","0"),i.setAttribute("id","chatra__iframe"),i.setAttribute("allowtransparency","true"),i.setAttribute("title","Chatra live chat"),i.setAttribute("allow","autoplay"),o.setAttribute("id","chatra"),s.setAttribute("id","chatra__iframe-wrapper"),I._addAutoRemovableEvent(e,"message",function(e){if(I._iframe.contentWindow===e.source){var t;try{t=JSON.parse(e.data)}catch(e){return}t&&t.type&&"string"==typeof t.type&&"Chatra"===t.sender&&I._messageHandler(t.type,t.data)}}),I._addAutoRemovableEvent(e,"focus",function(){I._postMessage("focus")}),I._addAutoRemovableEvent(e,"blur",function(){I._postMessage("blur")}),I._addAutoRemovableEvent(e,"mousedown",function(){I._postMessage("mousedown")}),I._addAutoRemovableEvent(e,"keyup",function(){I._postMessage("keyup")}),r.groupId=window.ChatraGroupID||r.groupId,I._setReferrer();var g=(navigator.language||navigator.userLanguage||"en").split("-")[0],y=encodeURIComponent(t.referrer),v=encodeURIComponent(I._referrer);if("trident"==a.browser.engine||"edgehtml"==a.browser.engine){if(y.length>800){var k=_(t.referrer);y=encodeURIComponent(k.protocol+"//"+k.host)}if(v.length>800){var C=_(I._referrer);v=encodeURIComponent(C.protocol+"//"+C.host)}}var S=d+"//"+p+"/?hostId="+f+"&mode="+encodeURIComponent(n)+"#clientId="+encodeURIComponent(m)+(void 0!==r.groupId?"&groupId="+encodeURIComponent(r.groupId):"")+(I._isMobile?"&isMobile=1":"")+(r.buttonStyle?"&buttonType="+encodeURIComponent(r.buttonStyle):"")+(r.language&&"string"==typeof r.language?"&langOverride="+encodeURIComponent(r.language):"")+"&lang="+encodeURIComponent(g)+"&currentPage="+encodeURIComponent(location.href)+"&currentPageTitle="+encodeURIComponent(t.title)+"&prevPage="+y+"&referrer="+v;switch(n){case"frame":var M,T=r.injectTo;if(!T)return console.warn("Chatra: `ChatraSetup.injectTo` is required when using `frame` mode!"),void I.kill();u(function(){return"string"==typeof T?M=t.getElementById(T):T[0]&&T[0].appendChild?M=T[0]:T.appendChild&&(M=T),M?(i.src=S,i.className="chatra__iframe--mode-frame",M.innerHTML="",M.appendChild(i),void(I._attachedToDom=!0)):(console.warn("Chatra: something is wrong with your `ChatraSetup.injectTo`"),void I.kill())});break;default:I._isMobile&&I._addClass("mobile-widget"),I._setButtonType("tab"),I._setChatPosition("br"),i.src=S,i.style.position="absolute",s.appendChild(i),o.appendChild(s),u(function(){if("webkit"==a.browser.engine&&I._addAutoRemovableEvent(o,"wheel",function(e){I._chatExpanded&&function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(e)}),I._isMobile&&I._features.transform){setTimeout(function(){I._adjustZoomLevel()},100);var r=I._adjustZoomLevel.bind(I);I._addAutoRemovableEvent(t.body,"touchend",r),I._addAutoRemovableEvent(e,"scroll",r),I._addAutoRemovableEvent(e,"orientationchange",r),I._addAutoRemovableEvent(e,"resize",r)}if(t.body.appendChild(o),I._attachedToDom=!0,e.Shopify&&"function"==typeof e.doShift){var n=e.doShift;e.doShift=function(){var e,t=o.style.position;return o.style.position="absolute",e=n.apply(this,arguments),o.style.position=t,e}}})}e.ChatraIntegration&&I.setIntegrationData(e.ChatraIntegration),r.startHidden&&I.hide(),I.setZIndex("number"==typeof r.zIndex?r.zIndex:I._zIndex),"function"==typeof r.onInit&&r.onInit(),r.colors&&I.setColors(r.colors),r.chatWidth&&I.setChatWidth(r.chatWidth),r.buttonSize&&I.setButtonSize(r.buttonSize),r.chatHeight&&I.setChatHeight(r.chatHeight),r.buttonPosition&&I.setButtonPosition(r.buttonPosition),r.locale&&I.setLocale(r.locale),I.pageView();for(var E=0;E<x.length;E++)I.apply(I,x[E])}}else console.warn("Chatra: No ChatraID specified, shutting down")},_chatWidth:380,_chatMinWidth:150,_transparentChatWidth:300,_mobileTransparentChatWidth:285,_chatHeight:600,_labelHeight:40,_mobileLabelHeight:40,_roundButtonSize:v,_labelMinWidth:70,_zIndex:9999,setIntegrationData:function(e){f(e)&&I._postMessage("integrationData",m(e))},updateIntegrationData:function(e){f(e)&&I._postMessage("updateIntegrationData",m(e))},pageView:function(){var e={currentPage:t.location.href,currentPageTitle:t.title==I._titleBlink.newTitle?I._titleBlink.originalTitle:t.title,referrer:I._referrer};n(I._lastPageData,e)||(I._lastPageData=e,I._chatReady?I._sendPageInfo(e):I._pageInfoQ.push(e),I._setStoredItem("Chatra.lastPageViewAt",+new Date+""))},setChatWidth:function(e){"number"==typeof e&&(I._chatWidth=e,I._recalcChatSize())},setButtonSize:function(e){"number"==typeof e&&(20>e&&(e=20),I._roundButtonSize=e,I._recalcChatSize())},setChatHeight:function(e){"number"==typeof e&&(I._chatHeight=e,I._recalcChatSize())},setZIndex:function(e){"number"==typeof e&&(I._zIndex=e,I._refreshZIndex())},setButtonPosition:function(e){return-1==["lt","lm","lb","bl","bc","br","rt","rm","rb"].indexOf(e)?void console.warn("Chatra: invalid `positionCode`!"):void I._postMessage("setPosition",e)},resetButtonPosition:function(){I._postMessage("resetPosition")},setColors:function(e){I._postMessage("colors",e)},resetColors:function(){I._postMessage("resetColors")},setLocale:function(e){I._postMessage("setLocale",e)},_openChat:function(e){I._postMessage("openChat",!!e)},openChat:function(e){"widget"==I._displayMode&&I._openChat(!!e)},expandWidget:function(e){"widget"==I._displayMode&&(I._isMobile||I._openChat(!!e))},minimizeWidget:function(){"widget"==I._displayMode&&I._postMessage("collapseChat")},expandChat:k("expandWidget"),collapseChat:k("minimizeWidget"),closeChat:k("minimizeWidget"),hide:function(){"widget"==I._displayMode&&(I._chatHiddenByUser=!0,I._refreshChatVisibility())},show:function(){"widget"==I._displayMode&&(I._chatHiddenByUser=!1,I._refreshChatVisibility())},hideChat:k("hide"),showChat:k("show"),setGroupId:function(e){void 0!==e&&I._postMessage("setGroupId",e)},_messageHandler:function(e,t){switch(e){case"setHostedItem":if(!t||"object"!=typeof t||"string"!=typeof t.key)return;I._setHostedItem(t.key,t.value);break;case"apiReady":I._apiReady=!0,I._sendMessageQ();break;case"readyToRetriveHostedStorage":I._sendHostedStorage();break;case"readyToRetriveData":I._chatReady=!0,I._sendFocus(),I._resolvePageInfoQ();break;case"headerReady":I._chatRendered=!0,"function"==typeof I._setup.onRendered&&I._setup.onRendered();break;case"collapseWindow":I._collapseChatWindow();break;case"expandWindow":I._expandChatWindow(t);break;case"hideChat":I._hideChatFromFrame();break;case"showChat":I._showChatFromFrame();break;case"setPosition":if(!t||"string"!=typeof t)return;I._setChatPosition(t);break;case"buttonType":if(!t||"string"!=typeof t)return;I._setButtonType(t);break;case"titleBlink":I._titleBlink(t);break;case"banned":I._setStoredItem("Chatra.banned",t?I._clientId:""),I._refreshChatVisibility();break;case"restart":I.restart();break;case"analyticsEvent":if(!t)return;"string"==typeof t?I._logAnalyticsEvent(t):"object"==typeof t&&I._logAnalyticsEvent(t[0],t[1]);break;case"labelWidth":if("number"!=typeof t&&null!==t)return;I._animating(),I._computedLabelWidth=t,I._recalcChatSize();break;case"transparentChatHeight":if("number"!=typeof t)return;I._transparentChatHeight=t,I._recalcChatSize();break;case"s":I.kill()}},_hideChatFromFrame:function(){I._chatHiddenByFrame=!0,I._refreshChatVisibility()},_showChatFromFrame:function(){I._chatHiddenByFrame=!1,I._refreshChatVisibility()},_getScaleLevel:function(){var a=e.screen,r=a.width;return{90:1,"-90":1}[e.orientation]&&"winphone"==I._sniff.os.name&&"trident"==I._sniff.browser.engine&&(r=a.height),r<t.documentElement.clientWidth?e.innerWidth/r:e.innerWidth/t.documentElement.clientWidth},_adjustZoomLevel:function(){if(I._isMobile&&I._features.transform&&("webkit"!=I._sniff.browser.engine||"ios"!=I._sniff.os.name)){var e=1;I._chatExpanded&&!I._chatTransparent||(e=I._getScaleLevel()),1.1>e&&(e=1),(e=e.toFixed(2))!=I._scale&&(I._transform.scale=e,I._recalcTransform(),I._scale=e)}},_transform:{},_recalcTransform:function(){var e=(I._transform,"");for(var t in I._transform)I._transform[t]&&I._transform.hasOwnProperty(t)&&(e+=" "+t+"("+I._transform[t]+")");e||(e="none"),I._wrapper.style.transform=I._wrapper.style.WebkitTransform=I._wrapper.style.MozTransform=I._wrapper.style.msTransform=e},_refreshZIndex:function(){I._wrapper.style.zIndex=I._chatExpanded?2147483647:I._zIndex},_refreshChatVisibility:function(){!I._chatRendered||I._chatHiddenByUser||I._chatHiddenByFrame||I._getStoredItem("Chatra.banned")===I._clientId?(I._visible=!1,I._removeClass("visible"),I._postMessage("visible",!1)):(I._visible=!0,I._addClass("visible"),I._postMessage("visible",!0),I._isSafari&&I._safariForceRedraw()),I._refreshMobileBodyFix(),I._refreshMobileViewportFix()},_refreshMobileBodyFix:function(){if(I._isMobile&&"widget"==I._displayMode)if(I._visible&&I._chatExpanded&&!I._chatTransparent){if(I._mobileBodyFixEnabled)return;I._lastScrollTop=e.pageYOffset,I._lastScrollLeft=e.pageXOffset,i(t.body,"chatra-mobile-widget-expanded"),i(t.documentElement,"chatra-mobile-widget-expanded"),I._mobileBodyFixEnabled=!0}else{if(!I._mobileBodyFixEnabled)return;o(t.body,"chatra-mobile-widget-expanded"),o(t.documentElement,"chatra-mobile-widget-expanded"),e.scrollTo(I._lastScrollLeft,I._lastScrollTop),I._mobileBodyFixEnabled=!1}},_refreshMobileViewportFix:function(){if(I._isMobile&&"widget"==I._displayMode&&("android"==I._sniff.os.name&&"webkit"==I._sniff.browser.engine&&I._sniff.os.majorVersion>=4||"ios"==I._sniff.os.name&&"webkit"==I._sniff.browser.engine||"gecko"==I._sniff.browser.engine))if(I._visible&&I._chatExpanded&&!I._chatTransparent)(e=u())||((e=t.createElement("meta")).setAttribute("name","viewport"),document.head.appendChild(e)),I._lastMetaViewportValue=e.getAttribute("content")||"width=none",e.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no");else{var e;(e=u())&&"string"==typeof I._lastMetaViewportValue&&e.setAttribute("content",I._lastMetaViewportValue)}},_chatExpanded:!1,_expandChatWindow:function(e){var t=I._chatTransparent;I._chatExpanded=!0,I._addClass("expanded"),e?(I._chatTransparent=!0,I._addClass("transparent")):(I._chatTransparent=!1,I._removeClass("transparent")),I._refreshZIndex(),I._adjustZoomLevel(),I._isToggling=!0,I._addClass("toggling"),I._animating(function(){I._isToggling=!1,I._removeClass("toggling"),I._isSafari&&I._recalcChatSize(),I._refreshMobileViewportFix(),setTimeout(I._refreshMobileBodyFix.bind(I),250)},t),I._recalcChatSize()},_collapseChatWindow:function(){var e=I._chatTransparent;I._chatExpanded=!1,I._chatTransparent=!1,I._refreshMobileViewportFix(),I._refreshMobileBodyFix(),I._removeClass("expanded"),I._removeClass("transparent"),I._isToggling=!0,I._addClass("toggling"),I._animating(function(){I._isToggling=!1,I._removeClass("toggling"),I._isSafari&&I._recalcChatSize(),I._adjustZoomLevel(),I._refreshZIndex()},e),I._recalcChatSize()},_animating:function(e,t){if(I._features.transition&&I._chatRendered){if("round"==I._buttonType||I._isMobile||I._chatTransparent||t)return I._addClass("fast-toggle"),void(e&&e());I._removeClass("fast-toggle"),I._addClass("animating"),clearTimeout(I._animatingTimer);var a=y+30;I._animatingTimer=setTimeout(function(){I._removeClass("animating"),e&&e()},a)}else e&&e()},_setChatPosition:function(e){var t={r:"right",l:"left",c:"center",t:"top",b:"bottom",m:"middle"},a=t[e.charAt(0)],r=t[e.charAt(1)];if(I._isMobile){var n=["0%","0%"];"center"==r&&(n[0]="50%"),"right"!=r&&"right"!=a||(n[0]="100%"),"middle"==r&&(n[1]="50%"),"bottom"==r&&(n[1]="100%"),"bottom"==a&&(n[1]="100%"),I._wrapper.style.transformOrigin=I._wrapper.style.WebkitTransformOrigin=I._wrapper.style.MozTransformOrigin=I._wrapper.style.msTransformOrigin=n.join(" ")}I._side&&I._removeClass("side-"+I._side),I._position&&I._removeClass("pos-"+I._position),I._addClass("side-"+a),I._addClass("pos-"+r),I._side=a,I._position=r,I._recalcChatSize()},_setButtonType:function(e){I._buttonType&&I._removeClass("style-"+I._buttonType),I._addClass("style-"+e),I._buttonType=e,I._recalcChatSize()},_recalcChatSize:function(){var e,t,a=Math.max(I._chatWidth,I._chatMinWidth),r=I._chatHeight,n=Math.max(I._computedLabelWidth||I._chatWidth,I._labelMinWidth),i=I._chatExpanded&&I._isMobile&&!I._chatTransparent,o=!!{left:1,right:1}[I._side];I._iframe.style.width=Math.max(a,o?0:n)+"px",I._iframe.style.height=Math.max(r,o?n:0)+"px",I._chatExpanded?I._chatTransparent?(e=I._isMobile?I._mobileTransparentChatWidth:I._transparentChatWidth,t=I._transparentChatHeight?Math.min(I._transparentChatHeight,r):r):(e=a,t=r):"round"==I._buttonType?e=t=I._roundButtonSize:(e=n,t=I._isMobile?I._mobileLabelHeight:I._labelHeight,o&&(t=[e,e=t][0])),"center"==I._position&&!i&&p(e)&&e++,"middle"==I._position&&!I._chatExpanded&&p(t)&&t++,i?(I._wrapper.style.width="100%",I._wrapper.style.height="100%"):(I._wrapper.style.width=e+"px",I._wrapper.style.height=t+"px"),"middle"!=I._position||I._chatExpanded?"top"!=I._position||I._chatExpanded||"round"==I._buttonType?I._transform.translateY=void 0:I._transform.translateY=I._isToggling&&I._isSafari?t+"px":"100%":I._transform.translateY=I._isToggling&&I._isSafari?t/2+"px":"50%","center"!=I._position||i?I._transform.translateX=void 0:I._transform.translateX="-50%",I._recalcTransform()},_postMessageQ:[],_postMessage:function(e,t){I._apiReady?I._iframe.contentWindow&&I._iframe.contentWindow.postMessage(JSON.stringify({type:e,data:t,sender:"Chatra"}),"*"):I._postMessageQ.push([e,t])},_sendMessageQ:function(){for(;I._postMessageQ.length;)I._postMessage.apply(I,I._postMessageQ.shift())},_pageInfoQ:[],_resolvePageInfoQ:function(){for(;I._pageInfoQ.length;)I._sendPageInfo(I._pageInfoQ.shift())},_sendPageInfo:function(e){I._postMessage("clientData",e)},_sendFocus:function(){var e=!t.hasFocus||t.hasFocus();I._postMessage(e?"focus":"blur")},_getClientId:function(){var e=I._getStoredItem("Chatra.clientId"),t=I._setup.clientId;if(t){var a=typeof t;"string"!==a&&"number"!==a||(e=t)}if(e)return e;try{e=g(40)}catch(t){for(var r=(+new Date+"").split(""),n="abcdefghijklmnopqrstuvwxyz".split("");n.length;)r.splice(d(r.length-1),0,n.splice(d(n.length-1),1)[0]);e=r.join("")}return I._setStoredItem("Chatra.clientId",e),e},_setReferrer:function(){var e=t.referrer;if(e&&_(e).host!==location.host)I._referrer=e;else{var a=+(I._getStoredItem("Chatra.lastPageViewAt")||"");new Date-a>36e5?I._referrer=e:I._referrer=I._getStoredItem("Chatra.referrer")||""}I._setStoredItem("Chatra.referrer",I._referrer||"")},_getHostedStorage:function(){var e;try{e=JSON.parse(I._getStoredItem("Chatra.hostedItems"))}catch(t){e={},I._setStoredItem("Chatra.hostedItems","{}")}return e},_sendHostedStorage:function(){I._postMessage("hostedStorage",I._getHostedStorage())},_setHostedItem:function(e,t){if("string"==typeof e){var a=I._getHostedStorage();a[e]=t,I._setStoredItem("Chatra.hostedItems",JSON.stringify(a))}},_getStoredItem:function(e){var t;try{t=localStorage.getItem(e)}catch(e){}return t||h(e)},_setStoredItem:function(e,t){try{localStorage.setItem(e,t)}catch(a){l(e,t)}},_addClass:function(e){for(var t=I._wrapper,a=[].concat(e),r=a.length-1;r>=0;r--)i(t,"chatra--"+a[r])},_removeClass:function(e){for(var t=I._wrapper,a=[].concat(e),r=a.length-1;r>=0;r--)o(t,"chatra--"+a[r])},_safariForceRedraw:function(){I._wrapper.style.zIndex=I._zIndex-1,I._wrapper.offsetWidth,I._refreshZIndex()},_titleBlink:function(e){clearTimeout(I._titleBlink._timeout),I._titleBlink.originalNow&&e?(I._titleBlink.originalTitle=t.title,t.title=I._titleBlink.newTitle=e):(t.title!==I._titleBlink.newTitle&&(I._titleBlink.originalTitle=t.title),t.title=I._titleBlink.originalTitle),I._titleBlink.originalNow=!e||!I._titleBlink.originalNow,e&&(I._titleBlink._timeout=setTimeout(function(){I._titleBlink(e)},d(1e3,2e3)))},_logAnalyticsEvent:function(t,a){if((a=a||{custom:!0,metrika:!0,ga:!0}).custom)try{"function"==typeof I._setup.onAnalyticEvent&&I._setup.onAnalyticEvent(t)}catch(e){console.warn("Chatra: Error while trying to execute `ChatraSetup.onAnalyticEvent` function:",e)}if(a.ga)try{var r;if(e.GoogleAnalyticsObject&&"function"==typeof e[e.GoogleAnalyticsObject]?r=e[e.GoogleAnalyticsObject]:"function"==typeof e.ga&&(r=e.ga),r)if(I._setup.gaTrackerName)"function"==typeof r.getByName&&((n=r.getByName(I._setup.gaTrackerName))&&"function"==typeof n.send&&n.send("event","Chatra",t),n||console.warn("Chatra: Could’t find Google Analytics tracker named “"+I._setup.gaTrackerName+"”."));else if(I._setup.gaTrackingId)"function"==typeof r.getAll&&((r.getAll()||[]).some(function(e){return e&&"function"==typeof e.get&&e.get("trackingId")==I._setup.gaTrackingId?("function"==typeof e.send&&e.send("event","Chatra",t),!0):void 0})||console.warn("Chatra: Could’t find Google Analytics tracker with tracking ID “"+I._setup.gaTrackingId+"”."));else{var n;(n="function"==typeof r.getAll?(r.getAll()||[])[0]:void 0)&&"function"==typeof n.send?n.send("event","Chatra",t):r("send","event","Chatra",t)}else e._gaq&&"function"==typeof e._gaq.push&&e._gaq.push(["_trackEvent","Chatra",t])}catch(e){console.warn("Chatra: Error while trying to create Google Analytics event:",e)}if(a.metrika)try{var i;if(I._setup.yaCounterId)e["yaCounter"+I._setup.yaCounterId]?i=e["yaCounter"+I._setup.yaCounterId]:console.warn("Chatra: Could’t find Yandex Metrika counter with ID “"+I._setup.yaCounterId+"”.");else{var o=e.Ya&&(e.Ya.Metrika||e.Ya.Metrika2),s=o&&"function"==typeof o.counters&&o.counters(),c=s&&s[0]&&s[0].id;c&&e["yaCounter"+c]&&(i=e["yaCounter"+c])}i&&i.reachGoal&&i.reachGoal("Chatra_"+t.replace(/\s/g,"_"))}catch(e){console.warn("Chatra: Error while trying to create Yandex.Metrika event:",e)}},_eventRemovers:[],_addAutoRemovableEvent:function(){I._eventRemovers.push(function(e,t,a,r){return t?(e.addEventListener(t,a,!!r),function(){!function(e,t,a,r){t&&e.removeEventListener(t,a,!!r)}(e,t,a,r)}):void 0}.apply(I,arguments))},_cleanEventListeners:function(){for(var e=I._eventRemovers.length-1;e>=0;e--)I._eventRemovers[e]()},restart:function(){I.kill(),r()},kill:function(){if(!I._killed)for(var e in I._cleanEventListeners(),I._style&&(s(I._style),delete I._style),I._iframe&&(s(I._iframe),I._iframe.src="",delete I._iframe),I._iframeWrapper&&(s(I._iframeWrapper),delete I._iframeWrapper),I._wrapper&&(s(I._wrapper),delete I._wrapper),I._killed=!0,I)I.hasOwnProperty(e)&&"function"==typeof I[e]&&"restart"!=e&&(I[e]=a)}}),e.Chatra&&e.Chatra.kill&&e.Chatra.kill(),e.Chatra=C,C._init()}()}(window,document);